(function () { const SUPPORTED_LANGS = ['es', 'en', 'fr']; const STORAGE_KEY = 'lpsn-lang'; function applyLanguage(lang) { if (!SUPPORTED_LANGS.includes(lang)) lang = 'es'; document.documentElement.setAttribute('lang', lang); try { localStorage.setItem(STORAGE_KEY, lang); } catch (e) { } document.querySelectorAll('[data-i18n-es]').forEach((el) => { const value = el.getAttribute(`data-i18n-${lang}`); if (!value) return; el.innerHTML = value; }); document .querySelectorAll('[data-i18n-placeholder-es]') .forEach((el) => { const value = el.getAttribute(`data-i18n-placeholder-${lang}`); if (value) { el.setAttribute('placeholder', value); } }); document .querySelectorAll('[data-i18n-aria-label-es]') .forEach((el) => { const value = el.getAttribute(`data-i18n-aria-label-${lang}`); if (value) { el.setAttribute('aria-label', value); } }); document .querySelectorAll('[data-i18n-title-es]') .forEach((el) => { const value = el.getAttribute(`data-i18n-title-${lang}`); if (value) { el.setAttribute('title', value); } }); } document.addEventListener('DOMContentLoaded', () => { let currentLang = 'es'; try { const saved = localStorage.getItem(STORAGE_KEY); if (saved && SUPPORTED_LANGS.includes(saved)) { currentLang = saved; } } catch (e) {} applyLanguage(currentLang); const btnLanguage = document.getElementById('btn-language'); if (!btnLanguage) return; btnLanguage.addEventListener('click', () => { const index = SUPPORTED_LANGS.indexOf(currentLang); const nextLang = SUPPORTED_LANGS[(index + 1) % SUPPORTED_LANGS.length]; currentLang = nextLang; applyLanguage(currentLang); const titleMap = { es: 'Cambiar idioma ES/EN/FR', en: 'Change language ES/EN/FR', fr: 'Changer de langue ES/EN/FR', }; btnLanguage.setAttribute('title', titleMap[currentLang] || titleMap.es); }); }); })();